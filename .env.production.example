# =============================================================================
# Renovator Platform - Production Environment Variables
# =============================================================================
# This file documents all environment variables required for production
# deployment on Render.com with Cloud-IAM managed Keycloak.
#
# Variables marked [render.yaml] are auto-configured via the Blueprint.
# Variables marked [manual] must be set in the Render dashboard.
# =============================================================================

# --- Backend Web Service (renovator-backend) ---------------------------------

# [render.yaml] Server
NODE_ENV=production
PORT=10000

# [render.yaml] Database - provided by Render Postgres
# Render auto-injects this from the linked database
DATABASE_URL=postgres://renovator:PASSWORD@HOST:5432/renovator

# [manual] Keycloak / Cloud-IAM
# Your Cloud-IAM managed Keycloak instance URL
KEYCLOAK_URL=https://your-instance.cloud-iam.com
KEYCLOAK_PUBLIC_URL=https://your-instance.cloud-iam.com
KEYCLOAK_REALM=renovator
KEYCLOAK_CLIENT_ID=renovator-app
KEYCLOAK_CLIENT_SECRET=your-client-secret-from-cloud-iam

# [manual] CORS - set to the frontend static site URL
FRONTEND_URL=https://renovator-frontend.onrender.com

# [render.yaml] File Storage - persistent disk mounted by Render
FILE_STORAGE_PATH=/data/uploads
FILE_STORAGE_BASE_URL=https://renovator-backend.onrender.com/files
FILE_STORAGE_SECRET=auto-generated-by-render

# [manual] Sentry Error Tracking (optional)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production

# --- Frontend Static Site (renovator-frontend) -------------------------------
# These are build-time variables baked into the Vite bundle.
# Set them in the Render dashboard for the static site service.

VITE_API_URL=https://renovator-backend.onrender.com
VITE_KEYCLOAK_URL=https://your-instance.cloud-iam.com
VITE_KEYCLOAK_REALM=renovator
VITE_KEYCLOAK_CLIENT_ID=renovator-app
VITE_SENTRY_DSN=https://your-sentry-dsn@sentry.io/frontend-project-id
VITE_SENTRY_ENVIRONMENT=production

# --- Cloud-IAM Keycloak Configuration ----------------------------------------
# These are NOT environment variables - configure them in the Cloud-IAM console.
#
# 1. Create/import realm: renovator
# 2. Create client: renovator-app (confidential, OpenID Connect)
# 3. Set Valid Redirect URIs:
#    - https://renovator-frontend.onrender.com/*
#    - https://renovator-backend.onrender.com/*
# 4. Set Web Origins (CORS):
#    - https://renovator-frontend.onrender.com
#    - https://renovator-backend.onrender.com
# 5. Copy the client secret to KEYCLOAK_CLIENT_SECRET above
# 6. If using a custom domain, add those URLs to redirect URIs and web origins
